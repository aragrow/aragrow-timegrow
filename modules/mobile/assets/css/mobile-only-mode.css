/**
 * TimeGrow Mobile-Only Mode Styles
 *
 * Optimized styling for mobile-only users
 *
 * @package TimeGrow
 * @subpackage Mobile
 * @since 2.1.0
 */

/* Hide admin bar completely */
#wpadminbar {
    display: none !important;
}

html {
    margin-top: 0 !important;
}

/* Simplify WordPress admin interface */
#wpbody-content {
    padding-bottom: 20px;
}

/* Hide unnecessary UI elements */
.wrap > h1 .page-title-action,
.wrap > .wp-heading-inline + .page-title-action,
.subsubsub,
.tablenav,
.search-box,
.view-switch,
.displaying-num {
    display: none !important;
}

/* Make buttons touch-friendly */
.button,
input[type="submit"],
input[type="button"],
.btn {
    min-height: 44px !important;
    padding: 10px 20px !important;
    font-size: 16px !important;
}

/* Larger form inputs */
input[type="text"],
input[type="email"],
input[type="number"],
input[type="tel"],
input[type="date"],
input[type="time"],
input[type="datetime-local"],
select,
textarea {
    min-height: 44px !important;
    font-size: 16px !important;
    padding: 10px !important;
}

/* Mobile Header with Hamburger */
.timegrow-mobile-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 50px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    display: flex;
    align-items: center;
    padding: 0 15px;
    z-index: 10000;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.timegrow-mobile-hamburger {
    background: transparent;
    border: none;
    color: white;
    cursor: pointer;
    padding: 8px;
    margin-right: 15px;
    transition: transform 0.3s;
}

.timegrow-mobile-hamburger.active {
    transform: rotate(90deg);
}

.timegrow-mobile-hamburger .dashicons {
    font-size: 28px;
    width: 28px;
    height: 28px;
}

.timegrow-mobile-title {
    font-size: 18px;
    font-weight: 600;
    letter-spacing: 0.5px;
}

/* Slide-out Menu */
.timegrow-mobile-menu {
    position: fixed;
    top: 50px;
    left: -280px;
    width: 280px;
    height: calc(100vh - 50px);
    background: white;
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
    z-index: 9999;
    transition: left 0.3s ease-in-out;
    overflow-y: auto;
}

.timegrow-mobile-menu.open {
    left: 0;
}

.timegrow-mobile-menu-list {
    list-style: none;
    margin: 0;
    padding: 0;
}

.timegrow-mobile-menu-item {
    border-bottom: 1px solid #f0f0f0;
}

.timegrow-mobile-menu-item.active {
    background: #f0f6fc;
}

.timegrow-mobile-menu-item a {
    display: flex;
    align-items: center;
    padding: 18px 20px;
    text-decoration: none;
    color: #333;
    font-size: 16px;
    font-weight: 500;
    transition: background 0.2s;
}

.timegrow-mobile-menu-item a:hover {
    background: #f6f7f7;
}

.timegrow-mobile-menu-item.active a {
    color: #2271b1;
}

.timegrow-mobile-menu-item .dashicons {
    font-size: 24px;
    width: 24px;
    height: 24px;
    margin-right: 15px;
}

/* Menu overlay when open */
.timegrow-mobile-menu.open::after {
    content: '';
    position: fixed;
    top: 50px;
    left: 280px;
    width: calc(100vw - 280px);
    height: calc(100vh - 50px);
    background: rgba(0, 0, 0, 0.3);
    z-index: -1;
}

/* Simplify table display on mobile */
@media (max-width: 782px) {
    .wp-list-table {
        font-size: 14px;
    }

    .wp-list-table th,
    .wp-list-table td {
        padding: 12px 8px;
    }

    /* Stack table actions */
    .row-actions {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-top: 8px;
    }

    .row-actions span {
        display: block;
    }
}

/* High contrast for outdoor visibility */
body {
    font-size: 16px;
    line-height: 1.5;
}

.wrap h1,
.wrap h2 {
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 16px;
}

/* Improve readability */
.wrap {
    padding: 16px;
}

/* Large tap targets for common actions */
.timegrow-clock-btn,
.timegrow-submit-btn {
    min-height: 54px !important;
    font-size: 18px !important;
    font-weight: 600 !important;
}

/* Optimize spacing */
.form-table th,
.form-table td {
    padding: 16px 10px;
}

/* Hide breadcrumbs and help text */
.breadcrumbs,
.contextual-help-tabs,
.screen-meta-toggle {
    display: none !important;
}

/* Simplify notices */
.notice {
    margin: 16px 0;
    padding: 12px;
    border-left-width: 4px;
}

/* Optimize for portrait orientation */
@media (orientation: portrait) {
    .wrap {
        max-width: 100%;
    }

    .wp-list-table {
        overflow-x: auto;
    }
}

/* Hide sidebar if present */
#adminmenuwrap,
#adminmenu {
    display: none !important;
}

#wpcontent {
    margin-left: 0 !important;
    padding-left: 0 !important;
}

/* Full width content */
.wrap {
    margin-right: 0;
    margin-left: 0;
}

/* ===== MANUAL ENTRY PAGE MOBILE OPTIMIZATION ===== */

/* Make the entire page container full width */
.timegrow-manual-page-container {
    max-width: 100% !important;
    padding: 0 !important;
}

.timegrow-manual-page-container .wrap {
    max-width: 100% !important;
    padding: 10px !important;
    margin: 0 !important;
}

/* Make manual entry container full width on mobile */
.timegrow-manual-page-container .timegrow-nexus-container {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
    padding: 15px !important;
    float: none !important;
    box-shadow: none !important;
    border-radius: 0 !important;
}

/* Show dropdown on all devices, hide tiles on mobile only */
@media (max-width: 782px) {
    .timegrow-manual-page-container #project-tiles-container {
        display: none !important;
    }
}

/* Make desktop tiles clickable */
.timegrow-manual-page-container .timegrow-project-tile {
    cursor: pointer !important;
    transition: all 0.2s ease !important;
}

.timegrow-manual-page-container .timegrow-project-tile:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
}

/* Hide drop zone - replaced with dropdown */
.timegrow-manual-page-container #project-drop-section {
    display: none !important;
}

/* Project dropdown selector for mobile */
.timegrow-manual-page-container #mobile-project-selector-wrapper {
    margin-bottom: 20px;
}

.timegrow-manual-page-container #mobile-project-selector-wrapper label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    font-size: 15px;
    color: #333;
}

/* Search input styling */
.timegrow-manual-page-container #project-search {
    width: 100% !important;
    min-height: 50px !important;
    padding: 12px 16px !important;
    font-size: 16px !important;
    border: 2px solid #ddd !important;
    border-radius: 8px !important;
    background: white !important;
    color: #333 !important;
    box-sizing: border-box !important;
    margin-bottom: 10px !important;
}

.timegrow-manual-page-container #project-search:focus {
    outline: none !important;
    border-color: #667eea !important;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1) !important;
}

/* Hide the select on mobile (use search only) */
@media (max-width: 782px) {
    .timegrow-manual-page-container #mobile-project-selector {
        display: none !important;
    }
}

/* Desktop select styling */
.timegrow-manual-page-container #mobile-project-selector {
    width: 100% !important;
    min-height: 50px !important;
    padding: 12px 16px !important;
    font-size: 16px !important;
    border: 2px solid #ddd !important;
    border-radius: 8px !important;
    background: white !important;
    color: #333 !important;
    box-sizing: border-box !important;
    -webkit-appearance: none !important;
    appearance: none !important;
    background-image: url('data:image/svg+xml;charset=UTF-8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8"%3E%3Cpath fill="%23333" d="M6 8L0 0h12z"/%3E%3C/svg%3E') !important;
    background-repeat: no-repeat !important;
    background-position: right 16px center !important;
    background-size: 12px !important;
    padding-right: 40px !important;
    cursor: pointer !important;
}

.timegrow-manual-page-container #mobile-project-selector:focus {
    outline: none !important;
    border-color: #667eea !important;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1) !important;
}

/* Form optimization */
.timegrow-manual-page-container #timegrow-nexus-entry-form {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
}

.timegrow-manual-page-container #timegrow-nexus-entry-form label {
    display: block;
    margin: 20px 0 8px 0;
    font-weight: 600;
    font-size: 15px;
    color: #333;
}

.timegrow-manual-page-container #timegrow-nexus-entry-form input[type="date"],
.timegrow-manual-page-container #timegrow-nexus-entry-form select,
.timegrow-manual-page-container #timegrow-nexus-entry-form textarea {
    width: 100% !important;
    min-height: 48px !important;
    padding: 12px !important;
    font-size: 16px !important;
    border: 2px solid #ddd;
    border-radius: 8px;
    box-sizing: border-box;
    -webkit-appearance: none;
    appearance: none;
}

.timegrow-manual-page-container #timegrow-nexus-entry-form textarea {
    min-height: 100px !important;
    resize: vertical;
}

/* Checkbox styling for mobile */
.timegrow-manual-page-container #timegrow-nexus-entry-form input[type="checkbox"] {
    width: 24px !important;
    height: 24px !important;
    margin-right: 10px;
    cursor: pointer;
}

/* Submit button full width and prominent */
.timegrow-manual-page-container #timegrow-submit {
    width: 100% !important;
    min-height: 54px !important;
    font-size: 18px !important;
    font-weight: 700 !important;
    border-radius: 8px !important;
    margin-top: 20px !important;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    transition: transform 0.2s, box-shadow 0.2s;
}

.timegrow-manual-page-container #timegrow-submit:not(.disabled):active {
    transform: scale(0.98);
}

.timegrow-manual-page-container #timegrow-submit.disabled {
    background: #ccc !important;
    color: #666 !important;
    box-shadow: none !important;
}

/* Hide page title on mobile to save space */
.timegrow-manual-page-container .timegrow-modern-header {
    padding: 15px;
    margin-bottom: 15px;
}

.timegrow-manual-page-container .timegrow-modern-header h1 {
    font-size: 22px !important;
    margin: 0 0 5px 0;
}

.timegrow-manual-page-container .timegrow-modern-header .subtitle {
    font-size: 14px;
    color: #666;
}

.timegrow-manual-page-container .timegrow-header-illustration {
    display: none; /* Hide illustration on mobile */
}

/* Section heading - hide on mobile */
.timegrow-manual-page-container > h3 {
    font-size: 18px !important;
    margin: 20px 0 12px 0;
    padding: 0 15px;
    font-weight: 600;
}

@media (max-width: 782px) {
    .timegrow-manual-page-container > h3 {
        display: none !important;
    }
}

/* Existing entries section */
.timegrow-manual-page-container h2 {
    font-size: 20px !important;
    margin: 30px 0 12px 0;
    padding: 0 15px;
}

.timegrow-manual-page-container .time-entries {
    padding: 0 15px;
    margin-top: 20px;
}

/* Make table responsive */
.timegrow-manual-page-container .time-entries table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}

.timegrow-manual-page-container .time-entries th,
.timegrow-manual-page-container .time-entries td {
    padding: 12px 8px;
    text-align: left;
    border: 1px solid #ddd;
}

.timegrow-manual-page-container .time-entries th {
    background: #f5f5f5;
    font-weight: 600;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Filter form */
.timegrow-manual-page-container .filter-form {
    margin: 15px 0 !important;
}

.timegrow-manual-page-container .filter-form select {
    min-height: 44px !important;
    padding: 10px !important;
    font-size: 16px !important;
    border: 2px solid #ddd;
    border-radius: 8px;
    width: 100%;
    max-width: 300px;
}

/* Pagination */
.timegrow-manual-page-container .pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    margin: 20px 0;
    padding: 15px;
}

.timegrow-manual-page-container .pagination a {
    padding: 10px 16px;
    background: #667eea;
    color: white;
    text-decoration: none;
    border-radius: 6px;
    font-weight: 600;
    font-size: 14px;
    transition: background 0.2s;
}

.timegrow-manual-page-container .pagination a:active {
    background: #5568d3;
}

.timegrow-manual-page-container .pagination span {
    font-weight: 600;
    color: #333;
}

/* Clear floats */
.timegrow-manual-page-container::after {
    content: '';
    display: table;
    clear: both;
}

/* Improve drag visual feedback on mobile */
.timegrow-manual-page-container .timegrow-project-tile.dragging {
    opacity: 0.5;
    transform: scale(1.05);
}

.timegrow-manual-page-container .timegrow-drop-zone.dragging-over {
    background-color: #e8f5e9 !important;
    border-color: #46b450 !important;
    color: #46b450 !important;
    border-width: 3px !important;
}

/* Tap to select project alternative for mobile */
@media (max-width: 782px) {
    .timegrow-manual-page-container .timegrow-project-tile {
        position: relative;
    }

    /* Chevron icon to indicate tap - iOS style */
    .timegrow-manual-page-container .timegrow-project-tile::after {
        content: '›' !important;
        display: flex !important;
        align-items: center;
        justify-content: center;
        font-size: 20px !important;
        font-weight: 300 !important;
        color: #c7c7cc !important;
        width: 20px !important;
        height: 20px !important;
        flex-shrink: 0 !important;
        background: transparent !important;
        border-radius: 0 !important;
        padding: 0 !important;
        position: static !important;
        transform: none !important;
        text-transform: none !important;
        letter-spacing: normal !important;
    }

    /* Selected project state - subtle green tint */
    .timegrow-manual-page-container .timegrow-project-tile.selected {
        opacity: 1 !important;
        box-shadow: none !important;
        transform: none !important;
        border-bottom: 1px solid #e5e5e5 !important;
        background: #f0fdf4 !important;
    }

    .timegrow-manual-page-container .timegrow-project-tile.selected h3 {
        color: #16a34a !important;
        font-weight: 500 !important;
    }

    .timegrow-manual-page-container .timegrow-project-tile.selected::after {
        content: '✓' !important;
        color: #16a34a !important;
        font-size: 18px !important;
        font-weight: 600 !important;
    }

    .timegrow-manual-page-container .timegrow-project-tile.selected::before {
        display: none !important;
    }

    /* Ensure full width and proper spacing on mobile */
    .timegrow-manual-page-container {
        padding: 0 !important;
        max-width: 100vw !important;
        overflow-x: hidden !important;
    }

    .timegrow-manual-page-container .wrap {
        padding: 10px !important;
        max-width: 100vw !important;
        box-sizing: border-box !important;
    }

    .timegrow-manual-page-container .timegrow-nexus-container {
        width: calc(100vw - 20px) !important;
        max-width: calc(100vw - 20px) !important;
        box-sizing: border-box !important;
    }

    /* Hide duplicate drop zone if present */
    .timegrow-manual-page-container #project-drop-section:nth-of-type(2) {
        display: none !important;
    }
}

/* Extra small screens (phones in portrait) */
@media (max-width: 480px) {
    .timegrow-manual-page-container .timegrow-modern-header h1 {
        font-size: 20px !important;
    }

    .timegrow-manual-page-container .timegrow-modern-header .subtitle {
        font-size: 13px;
    }

    .timegrow-manual-page-container .timegrow-project-tile {
        padding: 14px !important;
    }

    .timegrow-manual-page-container .timegrow-project-tile h3 {
        font-size: 16px;
    }

    .timegrow-manual-page-container .timegrow-project-tile p {
        font-size: 13px;
    }

    .timegrow-manual-page-container .timegrow-nexus-container {
        padding: 16px !important;
    }

    .timegrow-manual-page-container #timegrow-nexus-entry-form label {
        font-size: 14px;
    }

    /* Smaller table text on very small screens */
    .timegrow-manual-page-container .time-entries table {
        font-size: 13px;
    }

    .timegrow-manual-page-container .time-entries th,
    .timegrow-manual-page-container .time-entries td {
        padding: 10px 6px;
    }
}

/* Landscape orientation optimizations */
@media (max-width: 782px) and (orientation: landscape) {
    .timegrow-manual-page-container .timegrow-modern-header {
        padding: 10px;
    }

    .timegrow-manual-page-container .timegrow-modern-header h1 {
        font-size: 18px !important;
        margin: 0;
    }

    .timegrow-manual-page-container .timegrow-modern-header .subtitle {
        display: none; /* Hide subtitle in landscape to save space */
    }

    .timegrow-manual-page-container .timegrow-project-tile {
        padding: 12px !important;
    }

    .timegrow-manual-page-container .timegrow-drop-zone {
        min-height: 60px !important;
        padding: 15px;
    }
}

/* ===== CLOCK IN/OUT PAGE MOBILE OPTIMIZATION ===== */

/* Full width layout on mobile */
.timegrow-clock-layout {
    max-width: 100% !important;
    padding: 0 !important;
}

.timegrow-clock-grid {
    display: flex !important;
    flex-direction: column !important;
    gap: 15px !important;
}

/* Hide project tiles on mobile - use dropdown instead */
@media (max-width: 782px) {
    .timegrow-projects-column {
        display: none !important;
    }

    /* Make clock column full width */
    .timegrow-clock-column {
        width: 100% !important;
        max-width: 100% !important;
        padding: 0 10px !important;
    }
}

/* Optimize clock buttons for mobile */
.timegrow-clock-btn,
#clock-in-btn,
#clock-out-btn {
    width: 100% !important;
    min-height: 60px !important;
    font-size: 18px !important;
    font-weight: 700 !important;
    border-radius: 8px !important;
    margin: 10px 0 !important;
}

/* Clock status display */
.timegrow-status-display,
.timegrow-clock-status {
    padding: 20px !important;
    border-radius: 8px !important;
    margin: 15px 0 !important;
}

/* ===== EXPENSES PAGE MOBILE OPTIMIZATION ===== */

/* Full width expense form */
.timegrow-expense-form-container,
.timegrow-expense-container {
    width: 100% !important;
    max-width: 100% !important;
    padding: 15px !important;
    margin: 0 !important;
    box-sizing: border-box !important;
}

/* Expense form fields */
.timegrow-expense-form input[type="text"],
.timegrow-expense-form input[type="number"],
.timegrow-expense-form input[type="date"],
.timegrow-expense-form select,
.timegrow-expense-form textarea {
    width: 100% !important;
    min-height: 50px !important;
    padding: 12px !important;
    font-size: 16px !important;
    border: 2px solid #ddd !important;
    border-radius: 8px !important;
    box-sizing: border-box !important;
}

/* Receipt upload button */
.timegrow-expense-form input[type="file"],
.expense-receipt-upload {
    width: 100% !important;
    min-height: 50px !important;
    padding: 12px !important;
    font-size: 16px !important;
}

/* Expense submit button */
.timegrow-expense-submit,
.timegrow-expense-form button[type="submit"] {
    width: 100% !important;
    min-height: 54px !important;
    font-size: 18px !important;
    font-weight: 700 !important;
    border-radius: 8px !important;
    margin-top: 20px !important;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border: none !important;
}

/* Expense list on mobile */
@media (max-width: 782px) {
    .timegrow-expense-list,
    .expense-entries {
        padding: 0 10px !important;
    }

    .timegrow-expense-item {
        margin-bottom: 15px !important;
        padding: 15px !important;
        border-radius: 8px !important;
        border: 1px solid #ddd !important;
    }
}
